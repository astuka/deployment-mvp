JBR Holdings - Internal Development Division
Project: Deployment Automation Assistant - MVP Specifications Document

Date: April 1st, 2025 (Draft - For Immediate Development)

Author: Isaak, Chief Engineer

1. Project Goal: MVP for PowerShell IIS Deployment Script Generation

The primary goal of this MVP is to create a web-based tool that generates basic PowerShell scripts for deploying applications to IIS servers in locked-down environments. This MVP will focus specifically on IIS deployments and provide a foundational script generation capability.

2. Target User and Problem

This tool is designed for developers who need to deploy applications to IIS servers but face restrictions due to locked-down environments and limited administrative privileges. The current manual deployment process is time-consuming, error-prone, and inefficient. This tool aims to streamline this process by automatically generating deployment scripts tailored to common locked-down scenarios.

3. MVP Scope: IIS PowerShell Script Generation

This MVP will focus exclusively on generating PowerShell deployment scripts for IIS. Future iterations can expand to other script types (Ansible, etc.) and deployment scenarios.

4. User Inputs (Minimal Required for MVP)

The user interface will require the following minimal inputs to generate a PowerShell IIS deployment script:

Server Name: Text field - The name or IP address of the target IIS server.

Example: iis-server-01 or 192.168.1.100

Target Directory: Text field - The path on the IIS server where the application files should be deployed.

Example: C:\inetpub\wwwroot\MyApp

Application Pool Name: Text field - The name of the IIS Application Pool that the application will use.

Example: MyAppPool

Artifact Source Path: Text field - The path to the deployment artifact (e.g., a ZIP file) accessible from the user's local machine or a shared network location. This path will be used within the generated script, assuming the script execution context has access to this path or a similar accessible location on the target server (via shared drive, etc.).

Example: \\shared-drive\deployments\MyApp_v1.0.zip or C:\Users\Developer\Downloads\MyApp_v1.0.zip

5. Core PowerShell Script Structure (MVP Template)

The MVP will utilize a simplified, hardcoded PowerShell script template. JavaScript will be used client-side to replace placeholders within this template with user-provided inputs.

Here's the basic structure of the PowerShell script template:

# PowerShell Deployment Script - Generated by Deployment Automation Assistant MVP

Write-Host "Starting IIS Deployment Script..." -ForegroundColor Green

# --- User Configuration ---
$ServerName = "{{SERVER_NAME}}"
$TargetPath = "{{TARGET_DIRECTORY}}"
$AppPoolName = "{{APPLICATION_POOL_NAME}}"
$ArtifactSource = "{{ARTIFACT_SOURCE_PATH}}"
$DeploymentDirectory = Join-Path -Path $TargetPath -ChildPath "app" # Assuming app subdirectory
# --- End User Configuration ---

# Stop Application Pool
Write-Host "Stopping Application Pool '$AppPoolName' on server '$ServerName'..."
try {
    Stop-WebAppPool -Name $AppPoolName -ErrorAction Stop -ComputerName $ServerName
    Write-Host "Application Pool '$AppPoolName' stopped successfully." -ForegroundColor Green
}
catch {
    Write-Warning "Warning: Failed to stop Application Pool '$AppPoolName'. It might not exist or already be stopped."
    Write-Warning $_.Exception.Message
}

# Create Deployment Directory if it doesn't exist
Write-Host "Creating deployment directory '$DeploymentDirectory' if it doesn't exist on server '$ServerName'..."
Invoke-Command -ComputerName $ServerName -ScriptBlock {
    if (!(Test-Path -Path "{{TARGET_DIRECTORY}}\app" -PathType Container)) {
        New-Item -ItemType Directory -Path "{{TARGET_DIRECTORY}}\app" | Out-Null
        Write-Host "Deployment directory '{{TARGET_DIRECTORY}}\app' created." -ForegroundColor Green
    } else {
        Write-Host "Deployment directory '{{TARGET_DIRECTORY}}\app' already exists."
    }
} -ArgumentList @{ TARGET_DIRECTORY = $TargetPath }

# Copy Artifacts (Assuming ZIP Archive for MVP)
Write-Host "Copying artifacts from '$ArtifactSource' to '$DeploymentDirectory' on server '$ServerName'..."
try {
    Copy-Item -Path $ArtifactSource -Destination $DeploymentDirectory -Force -ErrorAction Stop
    Write-Host "Artifacts copied successfully." -ForegroundColor Green
}
catch {
    Write-Error "Error: Failed to copy artifacts."
    Write-Error $_.Exception.Message
    # Exit script with error code
    exit 1
}


# Expand Archive (Assuming ZIP Archive for MVP - Requires PowerShell 5+)
Write-Host "Extracting archive in '$DeploymentDirectory' on server '$ServerName'..."
try {
    Invoke-Command -ComputerName $ServerName -ScriptBlock {
        Expand-Archive -Path "{{TARGET_DIRECTORY}}\app\*.zip" -DestinationPath "{{TARGET_DIRECTORY}}\app" -Force
        Write-Host "Archive extracted successfully." -ForegroundColor Green
    } -ArgumentList @{ TARGET_DIRECTORY = $TargetPath }
}
catch {
    Write-Warning "Warning: Failed to extract archive. Ensure PowerShell 5+ is installed on the target server and the artifact is a valid ZIP file."
    Write-Warning $_.Exception.Message
}

# Start Application Pool
Write-Host "Starting Application Pool '$AppPoolName' on server '$ServerName'..."
try {
    Start-WebAppPool -Name $AppPoolName -ErrorAction Stop -ComputerName $ServerName
    Write-Host "Application Pool '$AppPoolName' started successfully." -ForegroundColor Green
}
catch {
    Write-Error "Error: Failed to start Application Pool '$AppPoolName'."
    Write-Error $_.Exception.Message
    # Exit script with error code
    exit 1
}

Write-Host "IIS Deployment Script Completed." -ForegroundColor Green
exit 0


6. Technology Stack for MVP

Frontend: Plain HTML, CSS, and JavaScript. This will ensure rapid development and deployment of the MVP. We will prioritize functionality over complex UI features for this initial version.

Backend (Script Generation): Client-side JavaScript. The script template will be stored in the frontend, and JavaScript will handle replacing the placeholders with user inputs. This simplifies the MVP architecture and avoids the need for server-side components for this initial version.

Hosting: Netlify. Confirmed for hosting the static HTML/CSS/JS frontend. Netlify Functions are not required for this MVP, but can be considered for future enhancements if more complex server-side logic is needed.

7. Basic UI Sketch (HTML Form Structure)

<!DOCTYPE html>
<html>
<head>
    <title>Deployment Automation Assistant - MVP</title>
</head>
<body>
    <h1>Deployment Automation Assistant - MVP</h1>
    <form id="deploymentForm">
        <div>
            <label for="serverName">Server Name:</label><br>
            <input type="text" id="serverName" name="serverName" required>
        </div>
        <div>
            <label for="targetDirectory">Target Directory:</label><br>
            <input type="text" id="targetDirectory" name="targetDirectory" required>
        </div>
        <div>
            <label for="appPoolName">Application Pool Name:</label><br>
            <input type="text" id="appPoolName" name="appPoolName" required>
        </div>
        <div>
            <label for="artifactSourcePath">Artifact Source Path:</label><br>
            <input type="text" id="artifactSourcePath" name="artifactSourcePath" required>
        </div>
        <br>
        <button type="submit">Generate PowerShell Script</button>
    </form>

    <br>
    <h2>Generated PowerShell Script:</h2>
    <pre id="scriptOutput">
        <!-- Script will be displayed here -->
    </pre>

    <script>
        // JavaScript to handle form submission and script generation will be added here
    </script>
</body>
</html>



8. PowerShell IIS Deployment Best Practices (MVP Considerations)

Basic IIS Commands: The script utilizes essential commands like Stop-WebAppPool, Start-WebAppPool, Copy-Item, and Expand-Archive.

Error Handling: Basic try-catch blocks are included for stopping and starting the application pool and copying artifacts. More robust error handling can be added in future iterations.

Idempotency (Limited in MVP): The script checks for the existence of the deployment directory, providing a degree of idempotency for directory creation. Full idempotency for all operations is beyond the scope of this MVP but is a good consideration for future enhancements.

Security (MVP Focus - Functionality): For the MVP, we are prioritizing functionality. Security considerations like secure credential management are important for later stages but are not in scope for this initial MVP. Users will need to execute the generated script using appropriate credentials in their locked-down environments.

9. Development Plan (Target: End of Week MVP)

Day 1-2: Frontend HTML/CSS/JS structure and form creation. Implement JavaScript to:

Get user inputs from the form.

Replace placeholders in the PowerShell script template with user inputs.

Display the generated script in the <pre id="scriptOutput"> element.

Day 3-4: Testing and Refinement:

Test the script generation with various inputs.

Ensure the generated script is syntactically correct PowerShell.

Basic testing of a generated script in a controlled IIS environment (if possible and safe within our internal lab).

Day 5: Deployment to Netlify and Final Review.


10. Future Enhancements (Beyond MVP)

More Script Types: Add support for generating Ansible playbooks, Bash scripts (for Linux environments), etc.

Advanced IIS Features: Support configuration of virtual directories, bindings, SSL certificates, etc.

Parameterization & Dynamic Templates: Make the script templates more dynamic and configurable.

Server-Side Logic (Netlify Functions): If more complex logic is needed, explore using Netlify Functions for script generation or template management.

Integration with Version Control: Potentially integrate with Git for versioning scripts and templates.

User Accounts and Saved Configurations: Allow users to save and manage deployment configurations.

Improved UI/UX: Enhance the user interface for better usability and a more polished look.

Comprehensive Error Handling and Logging: Implement more robust error handling and logging within the generated scripts.

Security Enhancements: Implement secure credential management and best practices for secure deployment.